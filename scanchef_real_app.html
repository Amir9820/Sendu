        <!-- PANTRY VIEW with Floating Bubbles -->
        <div id="pantry" class="view">
            <div class="content">
                <div class="hero-text">
                    <div class="hero-title">Your Smart Pantry</div>
                    <div class="hero-subtitle">Tap ingredients to filter recipes</div>
                </div>

                <!-- Filter Buttons -->
                <div style="display: flex; gap: 8px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px;">
                    <button class="action-button btn-secondary" onclick="filterPantry('all')" style="white-space: nowrap; width: auto; padding: 8px 15px; margin: 0;">
                        üåü All Items
                    </button>
                    <button class="action-button btn-secondary" onclick="filterPantry('halal')" style="white-space: nowrap; width: auto; padding: 8px 15px; margin: 0;">
                        üïå Halal Only
                    </button>
                    <button class="action-button btn-secondary" onclick="filterPantry('vegan')" style="white-space: nowrap; width: auto; padding: 8px 15px; margin: 0;">
                        üå± Vegan Only
                    </button>
                </div>

                <!-- Floating Pantry Bubbles -->
                <div class="pantry-view" id="pantry-items">
                    <div class="pantry-item" data-diet="vegan,vegetarian,gluten-free">
                        <span class="pantry-icon">ü•õ</span>
                        <div class="pantry-name">Oat Milk</div>
                    </div>
                    <div class="pantry-item" data-diet="vegan,vegetarian,halal,kosher">
                        <span class="pantry-icon">üçû</span>
                        <div class="pantry-name">Bread</div>
                    </div>
                    <div class="pantry-item" data-diet="vegan,vegetarian,halal,kosher,gluten-free">
                        <span class="pantry-icon">ü•ï</span>
                        <div class="pantry-name">Carrots</div>
                    </div>
                    <div class="pantry-item" data-diet="vegan,vegetarian,halal,kosher,gluten-free">
                        <span class="pantry-icon">ü•¶</span>
                        <div class="pantry-name">Broccoli</div>
                    </div>
                    <div class="pantry-item" data-diet="vegetarian,halal">
                        <span class="pantry-icon">üßÄ</span>
                        <div class="pantry-name">Cheese</div>
                    </div>
                    <div class="pantry-item" data-diet="vegan,vegetarian,halal,kosher,gluten-free">
                        <span class="pantry-icon">üçã</span>
                        <div class="pantry-name">Lemon</div>
                    </div>
                    <div class="pantry-item" data-diet="vegan,vegetarian,halal,kosher">
                        <span class="pantry-icon">üçù</span>
                        <div class="pantry-name">Pasta</div>
                    </div>
                    <div class="pantry-item" data-diet="vegan,vegetarian,halal,kosher,gluten-free">
                        <span class="pantry-icon">üçÖ</span>
                        <div class="pantry-name">Tomato</div>
                    </div>
                </div>

                <button class="action-button btn-primary" onclick="generateRecipes()">
                    ‚ú® Generate Recipes from Pantry
                </button>
            </div>
        </div>

        <!-- RECIPES VIEW with TikTok-style Cards -->
        <div id="recipes" class="view">
            <div class="content">
                <div class="hero-text">
                    <div class="hero-title">Recipe Magic ‚ú®</div>
                    <div class="hero-subtitle">Swipe through personalized recipes</div>
                </div>

                <!-- Recipe Cards -->
                <div class="recipe-cards" id="recipe-container">
                    <div class="recipe-card" onclick="openRecipe('pasta')">
                        <div class="recipe-content">
                            <div>
                                <div class="recipe-title">üçù Creamy Vegan Pasta</div>
                                <div class="recipe-ingredients">Pasta, oat milk, nutritional yeast, garlic, herbs</div>
                            </div>
                            <div class="recipe-time">‚è∞ 15 min</div>
                        </div>
                    </div>
                    
                    <div class="recipe-card" onclick="openRecipe('salad')" style="background: linear-gradient(135deg, #2ECC71, #27AE60);">
                        <div class="recipe-content">
                            <div>
                                <div class="recipe-title">ü•ó Rainbow Veggie Bowl</div>
                                <div class="recipe-ingredients">Carrots, broccoli, tomato, lemon dressing</div>
                            </div>
                            <div class="recipe-time">‚è∞ 10 min</div>
                        </div>
                    </div>
                    
                    <div class="recipe-card" onclick="openRecipe('cheese')" style="background: linear-gradient(135deg, #FF8C42, #E67E22);">
                        <div class="recipe-content">
                            <div>
                                <div class="recipe-title">üßÄ Cheesy Veggie Bake</div>
                                <div class="recipe-ingredients">Broccoli, cheese, herbs, breadcrumbs</div>
                            </div>
                            <div class="recipe-time">‚è∞ 25 min</div>
                        </div>
                    </div>
                </div>

                <!-- Recipe Filters -->
                <div style="margin: 20px 0;">
                    <h4 style="margin-bottom: 15px; font-size: 16px; font-weight: 700;">Filter Recipes</h4>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button class="badge compliant" onclick="filterRecipes('quick')" style="cursor: pointer; border: none; font-size: 12px;">
                            ‚ö° Quick (Under 15 min)
                        </button>
                        <button class="badge compliant" onclick="filterRecipes('healthy')" style="cursor: pointer; border: none; font-size: 12px;">
                            üå± Super Healthy
                        </button>
                        <button class="badge compliant" onclick="filterRecipes('comfort')" style="cursor: pointer; border: none; font-size: 12px;">
                            üç≤ Comfort Food
                        </button>
                    </div>
                </div>

                <button class="action-button btn-primary">üõí Generate Shopping List</button>
                <button class="action-button btn-secondary">üì± Share Recipe</button>
            </div>
        </div>

        <!-- DIETARY PREFERENCES VIEW -->
        <div id="preferences" class="view">
            <div class="content">
                <div class="hero-text">
                    <div class="hero-title">Your Dietary Profile</div>
                    <div class="hero-subtitle">Select all that apply to you</div>
                </div>
                
                <div class="preferences-grid">
                    <div class="preference-card" onclick="togglePreference(this, 'halal')">
                        <div class="preference-icon">üïå</div>
                        <div class="preference-title">Halal</div>
                        <div class="preference-desc">Islamic dietary laws</div>
                    </div>
                    
                    <div class="preference-card" onclick="togglePreference(this, 'vegan')">
                        <div class="preference-icon">üå±</div>
                        <div class="preference-title">Vegan</div>
                        <div class="preference-desc">Plant-based only</div>
                    </div>
                    
                    <div class="preference-card" onclick="togglePreference(this, 'vegetarian')">
                        <div class="preference-icon">ü•õ</div>
                        <div class="preference-title">Vegetarian</div>
                        <div class="preference-desc">No meat or fish</div>
                    </div>
                    
                    <div class="preference-card" onclick="togglePreference(this, 'kosher')">
                        <div class="preference-icon">‚ú°Ô∏è</div>
                        <div class="preference-title">Kosher</div>
                        <div class="preference-desc">Jewish dietary laws</div>
                    </div>
                    
                    <div class="preference-card" onclick="togglePreference(this, 'gluten-free')">
                        <div class="preference-icon">üåæ</div>
                        <div class="preference-title">Gluten-Free</div>
                        <div class="preference-desc">No wheat, barley, rye</div>
                    </div>
                    
                    <div class="preference-card" onclick="togglePreference(this, 'nut-free')">
                        <div class="preference-icon">ü•ú</div>
                        <div class="preference-title">Nut-Free</div>
                        <div class="preference-desc">No tree nuts or peanuts</div>
                    </div>
                </div>

                <!-- Additional Restrictions -->
                <div style="background: var(--light-gray); border-radius: 16px; padding: 20px; margin-bottom: 25px;">
                    <h4 style="margin-bottom: 15px; font-size: 14px; font-weight: 700; color: var(--dark-gray);">
                        Additional Preferences
                    </h4>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <label style="display: flex; align-items: center; gap: 10px; font-size: 14px; font-weight: 500;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: var(--primary-green);"> 
                            Organic products only
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px; font-size: 14px; font-weight: 500;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: var(--primary-green);"> 
                            No artificial colors
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px; font-size: 14px; font-weight: 500;">
                            <input type="checkbox" style="width: 18px; height: 18px; accent-color: var(--primary-green);"> 
                            Low sodium options
                        </label>
                    </div>
                </div>

                <button class="action-button btn-primary" onclick="savePreferences()">
                    üíæ Save My Preferences
                </button>
                <div id="saved-message" style="text-align: center; color: var(--primary-green); font-weight: 600; margin-top: 10px; display: none;">
                    ‚úÖ Preferences saved successfully!
                </div>

                <!-- Stats -->
                <div class="stats-grid" style="margin-top: 25px;">
                    <div class="stat-card">
                        <div class="stat-number" id="scan-count">0</div>
                        <div class="stat-label">Products Scanned</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="compliant-rate">0%</div>
                        <div class="stat-label">Dietary Match Rate</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scan Results Container -->
        <div id="scan-results"></div>

        <!-- Notification System -->
        <div id="notification" class="notification"></div>
    </div>

    <script>
        // App State Management with Local Storage
        let userState = {
            points: parseInt(localStorage.getItem('scanchef_points')) || 0,
            scanCount: parseInt(localStorage.getItem('scanchef_scans')) || 0,
            level: localStorage.getItem('scanchef_level') || 'FRESH',
            preferences: JSON.parse(localStorage.getItem('scanchef_preferences')) || [],
            streak: parseInt(localStorage.getItem('scanchef_streak')) || 1,
            pantryItems: JSON.parse(localStorage.getItem('scanchef_pantry')) || []
        };

        // Enhanced Product Database
        const productDatabase = {
            '012000001277': {
                name: 'Coca-Cola Classic',
                brand: 'The Coca-Cola Company',
                image: 'ü•§',
                ingredients: ['Carbonated Water', 'High Fructose Corn Syrup', 'Caramel Color', 'Phosphoric Acid', 'Natural Flavors', 'Caffeine'],
                dietary: {
                    halal: true,
                    vegan: true,
                    vegetarian: true,
                    kosher: true,
                    'gluten-free': true,
                    'nut-free': true
                },
                origin: 'USA',
                certifications: ['Kosher', 'Halal Certified'],
                nutritionScore: 'C',
                warnings: []
            },
            '028400064057': {
                name: 'Oreo Original Cookies',
                brand: 'Nabisco',
                image: 'üç™',
                ingredients: ['Unbleached Enriched Flour', 'Sugar', 'Palm Oil', 'Cocoa', 'High Fructose Corn Syrup', 'Leavening', 'Salt', 'Soy Lecithin'],
                dietary: {
                    halal: false,
                    vegan: false,
                    vegetarian: true,
                    kosher: true,
                    'gluten-free': false,
                    'nut-free': false
                },
                origin: 'USA',
                certifications: ['Kosher'],
                nutritionScore: 'D',
                warnings: ['Contains dairy', 'May contain nuts']
            },
            '073298098228': {
                name: 'Dark Chocolate Bar 70%',
                brand: 'Green Valley Organic',
                image: 'üç´',
                ingredients: ['Organic Cocoa Mass', 'Organic Cane Sugar', 'Organic Cocoa Butter', 'Vanilla Extract'],
                dietary: {
                    halal: true,
                    vegan: true,
                    vegetarian: true,
                    kosher: true,
                    'gluten-free': true,
                    'nut-free': true
                },
                origin: 'Belgium',
                certifications: ['Organic', 'Fair Trade', 'Halal', 'Kosher'],
                nutritionScore: 'B',
                warnings: []
            }
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            updateUserInterface();
            updateTime();
            setInterval(updateTime, 60000);
            loadUserPreferences();
            createPWAManifest();
        });

        // Real Camera Functionality
        let cameraStream = null;
        let scannerActive = false;

        async function startCamera() {
            try {
                const constraints = {
                    video: {
                        facingMode: 'environment',
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    }
                };

                cameraStream = await navigator.mediaDevices.getUserMedia(constraints);
                const video = document.getElementById('camera-video');
                const placeholder = document.getElementById('camera-placeholder');
                
                video.srcObject = cameraStream;
                video.style.display = 'block';
                placeholder.style.display = 'none';
                
                document.getElementById('start-camera').style.display = 'none';
                document.getElementById('stop-camera').style.display = 'block';
                
                initializeBarcodeScanner();
                showNotification('üì∑ Magical scanner activated! Point at any barcode');
            } catch (error) {
                console.error('Camera error:', error);
                showNotification('‚ùå Camera access needed for magical scanning');
            }
        }

        function stopCamera() {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
            
            if (scannerActive && typeof Quagga !== 'undefined') {
                Quagga.stop();
                scannerActive = false;
            }
            
            const video = document.getElementById('camera-video');
            const placeholder = document.getElementById('camera-placeholder');
            
            video.style.display = 'none';
            placeholder.style.display = 'block';
            
            document.getElementById('start-camera').style.display = 'block';
            document.getElementById('stop-camera').style.display = 'none';
            
            showNotification('üì± Scanner stopped');
        }

        function initializeBarcodeScanner() {
            if (typeof Quagga === 'undefined') {
                showNotification('üì∑ Scanner library loading...');
                return;
            }

            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector('#camera-video'),
                    constraints: {
                        width: 640,
                        height: 480,
                        facingMode: "environment"
                    }
                },
                decoder: {
                    readers: ["code_128_reader", "ean_reader", "ean_8_reader", "code_39_reader"]
                }
            }, function(err) {
                if (err) {
                    console.log('Scanner error:', err);
                    return;
                }
                Quagga.start();
                scannerActive = true;
            });

            Quagga.onDetected(function(data) {
                const barcode = data.codeResult.code;
                console.log('Barcode detected:', barcode);
                
                // Show scan success animation
                showScanSuccess();
                
                Quagga.stop();
                scannerActive = false;
                
                processScannedBarcode(barcode);
                
                setTimeout(() => {
                    if (cameraStream && typeof Quagga !== 'undefined') {
                        Quagga.start();
                        scannerActive = true;
                    }
                }, 3000);
            });
        }

        function showScanSuccess() {
            const container = document.getElementById('camera-container');
            const successDiv = document.createElement('div');
            successDiv.className = 'scan-success';
            successDiv.innerHTML = '‚ú® Product Found!';
            container.appendChild(successDiv);
            
            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.parentNode.removeChild(successDiv);
                }
            }, 2000);
        }

        function processScannedBarcode(barcode) {
            const product = productDatabase[barcode];
            
            if (product) {
                displayProductInfo(product, barcode);
                addPointsForScan();
                addToPantry(product);
            } else {
                showUnknownProduct(barcode);
            }
        }

        function displayProductInfo(product, barcode) {
            const badges = generateDietaryBadges(product);
            
            const resultHTML = `
                <div class="food-info-card">
                    <div class="product-header">
                        <div class="product-image">${product.image}</div>
                        <div class="product-details">
                            <h3>${product.name}</h3>
                            <div class="product-brand">${product.brand}</div>
                        </div>
                    </div>
                    
                    <div class="dietary-badges">
                        ${badges}
                    </div>
                    
                    <div style="background: var(--light-gray); border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="font-size: 14px; font-weight: 700; margin-bottom: 8px; color: var(--dark-gray);">
                            üß™ Key Details
                        </h4>
                        <div style="font-size: 12px; color: var(--slate-gray); line-height: 1.6;">
                            <p><strong>Origin:</strong> ${product.origin}</p>
                            <p><strong>Nutrition Score:</strong> ${product.nutritionScore}</p>
                            <p><strong>Certifications:</strong> ${product.certifications.join(', ')}</p>
                        </div>
                    </div>
                    
                    <button class="action-button btn-primary" onclick="addToPantryManual('${barcode}')">
                        ü•¨ Add to Pantry
                    </button>
                    <button class="action-button btn-orange" onclick="findSimilarProducts()">
                        üîç Find Similar Products
                    </button>
                </div>
            `;
            
            document.getElementById('scan-results').innerHTML = resultHTML;
            showNotification(`‚ú® ${product.name} scanned! +50 points earned`);
        }

        function generateDietaryBadges(product) {
            const userPrefs = userState.preferences;
            let badges = '';
            
            Object.entries(product.dietary).forEach(([diet, compliant]) => {
                const isUserPref = userPrefs.includes(diet);
                let badgeClass = compliant ? 'compliant' : 'non-compliant';
                let icon = compliant ? '‚úÖ' : '‚ùå';
                
                if (isUserPref) {
                    badges += `<div class="badge ${badgeClass}" style="border: 2px solid var(--primary-green);">
                        ${icon} ${diet.charAt(0).toUpperCase() + diet.slice(1).replace('-', ' ')}
                    </div>`;
                } else {
                    badges += `<div class="badge ${badgeClass}">
                        ${icon} ${diet.charAt(0).toUpperCase() + diet.slice(1).replace('-', ' ')}
                    </div>`;
                }
            });
            
            return badges;
        }

        function showUnknownProduct(barcode) {
            const resultHTML = `
                <div class="food-info-card">
                    <div class="product-header">
                        <div class="product-image">‚ùì</div>
                        <div class="product-details">
                            <h3>Unknown Product</h3>
                            <div class="product-brand">Barcode: ${barcode}</div>
                        </div>
                    </div>
                    
                    <p style="color: var(--slate-gray); margin-bottom: 20px; font-size: 14px;">
                        This product isn't in our database yet. Help us add it!
                    </p>
                    
                    <button class="action-button btn-primary" onclick="submitNewProduct('${barcode}')">
                        üìù Help Add This Product (+100 points)
                    </button>
                </div>
            `;
            
            document.getElementById('scan-results').innerHTML = resultHTML;
            showNotification('ü§î New product discovered! Help us add it for bonus points');
        }

        function addPointsForScan() {
            userState.points += 50;
            userState.scanCount += 1;
            updateLevel();
            saveUserState();
            updateUserInterface();
        }

        function updateLevel() {
            const points = userState.points;
            if (points >= 1000) userState.level = 'CHEF';
            else if (points >= 500) userState.level = 'HEALTHY';
            else if (points >= 100) userState.level = 'GROWING';
            else userState.level = 'FRESH';
        }

        function addToPantry(product) {
            if (!userState.pantryItems.find(item => item.name === product.name)) {
                userState.pantryItems.push({
                    name: product.name,
                    image: product.image,
                    dietary: product.dietary,
                    addedDate: new Date().toISOString()
                });
                saveUserState();
            }
        }

        // View Management
        function switchView(viewName) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(viewName).classList.add('active');
            event.target.classList.add('active');
        }

        // Preferences Management
        function togglePreference(card, preference) {
            card.classList.toggle('selected');
            
            if (userState.preferences.includes(preference)) {
                userState.preferences = userState.preferences.filter(p => p !== preference);
            } else {
                userState.preferences.push(preference);
            }
        }

        function savePreferences() {
            saveUserState();
            document.getElementById('saved-message').style.display = 'block';
            setTimeout(() => {
                document.getElementById('saved-message').style.display = 'none';
            }, 3000);
            updateUserInterface();
            showNotification('‚úÖ Dietary preferences saved!');
        }

        function loadUserPreferences() {
            userState.preferences.forEach(pref => {
                const card = document.querySelector(`[onclick="togglePreference(this, '${pref}')"]`);
                if (card) {
                    card.classList.add('selected');
                }
            });
        }

        // Pantry Functions
        function filterPantry(filter) {
            const items = document.querySelectorAll('.pantry-item');
            items.forEach(item => {
                const diets = item.dataset.diet.split(',');
                if (filter === 'all' || diets.includes(filter)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
            showNotification(`üîç Showing ${filter} items`);
        }

        function generateRecipes() {
            switchView('recipes');
            showNotification('üë®‚Äçüç≥ Generated 3 personalized recipes!');
        }

        // Recipe Functions
        function openRecipe(recipeType) {
            showNotification(`üì± Opening ${recipeType} recipe...`);
        }

        function filterRecipes(filter) {
            showNotification(`üîç Filtering ${filter} recipes`);
        }

        // Manual Functions
        function searchProduct() {
            const barcode = document.getElementById('manual-barcode').value.trim();
            if (barcode) {
                processScannedBarcode(barcode);
            }
        }

        function testProduct(barcode) {
            document.getElementById('manual-barcode').value = barcode;
            processScannedBarcode(barcode);
        }

        // Utility Functions
        function updateTime() {
            const now = new Date();
            const time = now.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: false 
            });
            document.getElementById('current-time').textContent = time;
        }

        function updateUserInterface() {
            document.getElementById('userPoints').textContent = userState.points;
            document.getElementById('userLevel').textContent = userState.level;
            document.getElementById('scan-count').textContent = userState.scanCount;
            
            // Update progress bar
            const progressPercent = Math.min((userState.points % 100), 100);
            document.getElementById('progressFill').style.width = progressPercent + '%';
            
            // Update compliance rate
            const complianceRate = Math.floor(Math.random() * 20) + 80; // Simulate 80-100%
            document.getElementById('compliant-rate').textContent = complianceRate + '%';
        }

        function saveUserState() {
            localStorage.setItem('scanchef_userName', userState.userName);
            localStorage.setItem('scanchef_points', userState.points);
            localStorage.setItem('scanchef_scans', userState.scanCount);
            localStorage.setItem('scanchef_level', userState.level);
            localStorage.setItem('scanchef_preferences', JSON.stringify(userState.preferences));
            localStorage.setItem('scanchef_streak', userState.streak);
            localStorage.setItem('scanchef_pantry', JSON.stringify(userState.pantryItems));
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function createPWAManifest() {
            const manifest = {
                name: "ScanChef - Your AI Kitchen Helper",
                short_name: "ScanChef",
                description: "Healthy lifestyle meets AI kitchen helper",
                start_url: "/",
                display: "standalone",
                background_color: "#2ECC71",
                theme_color: "#2ECC71",
                icons: [
                    {
                        src: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxOTIiIHJ4PSIzMiIgZmlsbD0iIzJFQ0M3MSIvPjx0ZXh0IHg9Ijk2IiB5PSIxMDQiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI4MCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfjaY8L3RleHQ+PC9zdmc+",
                        sizes: "192x192",
                        type: "image/svg+xml"
                    }
                ]
            };
            
            const blob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
            const manifestURL = URL.createObjectURL(blob);
            document.getElementById('manifest').setAttribute('href', manifestURL);
        }

        // Additional Helper Functions
        function addToPantryManual(barcode) {
            const product = productDatabase[barcode];
            if (product) {
                addToPantry(product);
                showNotification(`ü•¨ ${product.name} added to your pantry!`);
                userState.points += 25; // Bonus points for organizing pantry
                saveUserState();
                updateUserInterface();
            }
        }

        function findSimilarProducts() {
            showNotification('üîç Finding similar products in your area...');
            // In real app: API call to find alternatives
            setTimeout(() => {
                showNotification('‚ú® Found 12 similar products! Check your recommendations.');
            }, 2000);
        }

        function submitNewProduct(barcode) {
            showNotification('üìù Thank you! Product submission form opening...');
            userState.points += 100; // Bonus for contributing
            saveUserState();
            updateUserInterface();
            // In real app: Open contribution form
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const manualInput = document.getElementById('manual-barcode');
                if (document.activeElement === manualInput && manualInput.value.trim()) {
                    searchProduct();
                }
            }
        });

        // Service Worker Registration for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful');
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }

        // Add install prompt for PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
        });

        function showInstallButton() {
            const installButton = document.createElement('button');
            installButton.textContent = 'üì± Install ScanChef App';
            installButton.className = 'action-button btn-primary';
            installButton.style.position = 'fixed';
            installButton.style.bottom = '20px';
            installButton.style.left = '20px';
            installButton.style.right = '20px';
            installButton.style.zIndex = '9999';
            installButton.onclick = installApp;
            document.body.appendChild(installButton);

            // Auto-hide after 10 seconds
            setTimeout(() => {
                if (installButton.parentNode) {
                    installButton.parentNode.removeChild(installButton);
                }
            }, 10000);
        }

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showNotification('üéâ ScanChef installed! Welcome to the future of cooking!');
                    }
                    deferredPrompt = null;
                });
            }
        }

        // Analytics simulation (replace with real analytics)
        function trackEvent(category, action, label) {
            console.log(`Analytics: ${category} - ${action} - ${label}`);
            // In real app: Send to analytics service
        }

        // Track user interactions
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('action-button')) {
                trackEvent('User Interaction', 'Button Click', event.target.textContent);
            }
        });

        // Simulate real-time updates
        setInterval(() => {
            // Simulate other users' activity
            if (Math.random() > 0.98) {
                const activities = [
                    'üåü Sarah just found a great vegan product!',
                    'üèÜ Mike reached Gold level!',
                    'üì± New product added to database!',
                    'üéØ Daily challenge completed by 1,247 users!'
                ];
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                showNotification(randomActivity);
            }
        }, 30000); // Every 30 seconds

        // Initialize sample data on first run
        if (userState.scanCount === 0 && userState.points === 0) {
            // Welcome new users
            setTimeout(() => {
                showNotification('üëã Welcome to ScanChef! Try scanning the sample products below.');
            }, 2000);
        }

        // Auto-save user state periodically
        setInterval(() => {
            saveUserState();
        }, 60000); // Every minute

        console.log('üöÄ ScanChef initialized successfully!');
        console.log('üì± Ready for magical food scanning...');
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScanChef - Your AI Kitchen Helper</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- PWA Manifest -->
    <link rel="manifest" id="manifest">
    <meta name="theme-color" content="#2ECC71">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ScanChef">
    
    <!-- Barcode Scanner Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #2ECC71;
            --secondary-orange: #FF8C42;
            --neutral-white: #FFFFFF;
            --slate-gray: #64748B;
            --light-gray: #F8FAFC;
            --dark-gray: #334155;
            --success-green: #10B981;
            --error-red: #EF4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%);
            min-height: 100vh;
            color: var(--dark-gray);
            overflow-x: hidden;
        }

        /* Mobile Container */
        .app-container {
            max-width: 100%;
            margin: 0 auto;
            background: var(--neutral-white);
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 768px) {
            .app-container {
                max-width: 375px;
                margin: 20px auto;
                border-radius: 30px;
                overflow: hidden;
                box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
            }
        }

        /* Status Bar */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px 0;
            font-size: 14px;
            font-weight: 600;
            color: var(--dark-gray);
            background: var(--neutral-white);
        }

        /* Header with Clean Design */
        .header {
            background: linear-gradient(135deg, var(--primary-green) 0%, #27AE60 100%);
            color: white;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 28px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .logo-text {
            font-size: 24px;
            font-weight: 900;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .points-container {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .points {
            font-weight: 800;
            font-size: 16px;
            color: var(--secondary-orange);
        }

        .level-badge {
            background: var(--secondary-orange);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: var(--secondary-orange);
            border-radius: 3px;
            width: 25%;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(255, 140, 66, 0.5);
        }

        .tagline {
            font-size: 13px;
            opacity: 0.95;
            font-weight: 500;
            margin-top: 8px;
        }

        /* Clean Navigation */
        .nav-tabs {
            display: flex;
            background: var(--neutral-white);
            border-bottom: 1px solid #E2E8F0;
        }

        .nav-tab {
            flex: 1;
            padding: 16px 8px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 12px;
            color: var(--slate-gray);
            position: relative;
        }

        .nav-tab.active {
            color: var(--primary-green);
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: var(--primary-green);
            border-radius: 2px;
        }

        /* Content */
        .content {
            padding: 25px 20px;
            min-height: 500px;
        }

        /* MAGICAL SCANNER with Neon Green Glow */
        .scanner-view {
            text-align: center;
        }

        #camera-container {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--light-gray), #E2E8F0);
            border-radius: 20px;
            position: relative;
            margin-bottom: 25px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(46, 204, 113, 0.1);
        }

        #camera-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
        }

        .scan-overlay {
            position: absolute;
            width: 250px;
            height: 150px;
            border: 3px solid var(--primary-green);
            border-radius: 20px;
            z-index: 10;
            animation: neonGlow 2s ease-in-out infinite;
        }

        @keyframes neonGlow {
            0%, 100% { 
                box-shadow: 0 0 20px var(--primary-green);
                border-color: var(--primary-green);
            }
            50% { 
                box-shadow: 0 0 40px var(--primary-green), 0 0 60px rgba(46, 204, 113, 0.5);
                border-color: #27AE60;
            }
        }

        .scan-line {
            position: absolute;
            width: 240px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--primary-green), transparent);
            animation: scanMove 2.5s ease-in-out infinite;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 2px;
            z-index: 11;
        }

        @keyframes scanMove {
            0%, 100% { transform: translate(-50%, -120px); opacity: 0.8; }
            50% { transform: translate(-50%, 70px); opacity: 1; }
        }

        .camera-placeholder {
            color: var(--slate-gray);
            font-size: 48px;
            opacity: 0.5;
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.05); opacity: 0.7; }
        }

        /* Hero Visual Text */
        .hero-text {
            margin-bottom: 20px;
            text-align: center;
        }

        .hero-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--dark-gray);
            margin-bottom: 8px;
        }

        .hero-subtitle {
            font-size: 14px;
            color: var(--slate-gray);
            line-height: 1.5;
        }

        /* Animated Scan Success */
        .scan-success {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary-green);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 16px;
            z-index: 20;
            animation: scanSuccessAnim 2s ease-out forwards;
            opacity: 0;
        }

        @keyframes scanSuccessAnim {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* Clean Action Buttons */
        .action-button {
            width: 100%;
            padding: 16px;
            border-radius: 16px;
            border: none;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-green), #27AE60);
            color: white;
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.25);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.35);
        }

        .btn-secondary {
            background: var(--light-gray);
            color: var(--dark-gray);
            border: 2px solid #E2E8F0;
        }

        .btn-secondary:hover {
            background: #E2E8F0;
            transform: translateY(-1px);
        }

        .btn-orange {
            background: linear-gradient(135deg, var(--secondary-orange), #E67E22);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 140, 66, 0.25);
        }

        .btn-orange:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 140, 66, 0.35);
        }

        /* Food Info Card with Apple Health UI Style */
        .food-info-card {
            background: var(--neutral-white);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid #F1F5F9;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .product-header {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .product-image {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-green), #27AE60);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            animation: itemGlow 1.5s ease-in-out;
        }

        @keyframes itemGlow {
            0% { box-shadow: 0 0 0 rgba(46, 204, 113, 0); }
            50% { box-shadow: 0 0 20px rgba(46, 204, 113, 0.4); }
            100% { box-shadow: 0 0 0 rgba(46, 204, 113, 0); }
        }

        .product-details h3 {
            font-size: 18px;
            font-weight: 800;
            color: var(--dark-gray);
            margin-bottom: 6px;
        }

        .product-brand {
            color: var(--slate-gray);
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 12px;
        }

        /* Quick Badges (Apple Health Style) */
        .dietary-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 4px;
            animation: badgeSlide 0.6s ease-out forwards;
            opacity: 0;
        }

        @keyframes badgeSlide {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .badge:nth-child(1) { animation-delay: 0.1s; }
        .badge:nth-child(2) { animation-delay: 0.2s; }
        .badge:nth-child(3) { animation-delay: 0.3s; }
        .badge:nth-child(4) { animation-delay: 0.4s; }

        .badge.compliant {
            background: #DCFCE7;
            color: #166534;
        }

        .badge.non-compliant {
            background: #FEE2E2;
            color: #DC2626;
        }

        .badge.warning {
            background: #FEF3C7;
            color: #92400E;
        }

        /* Floating Pantry Bubbles */
        .pantry-view {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .pantry-item {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
            border: 2px solid transparent;
            animation: bubbleFloat 3s ease-in-out infinite;
        }

        .pantry-item:nth-child(even) {
            animation-delay: 1.5s;
        }

        @keyframes bubbleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }

        .pantry-item:hover {
            transform: translateY(-5px) scale(1.05);
            border-color: var(--primary-green);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.15);
        }

        .pantry-icon {
            font-size: 28px;
            margin-bottom: 8px;
            display: block;
            animation: ingredientWink 4s ease-in-out infinite;
        }

        @keyframes ingredientWink {
            0%, 90%, 100% { transform: scale(1); }
            95% { transform: scale(1.1); }
        }

        .pantry-name {
            font-size: 11px;
            font-weight: 600;
            color: var(--dark-gray);
        }

        /* Recipe Cards (TikTok-style) */
        .recipe-cards {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin: 20px 0;
        }

        .recipe-card {
            min-width: 200px;
            height: 250px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .recipe-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><radialGradient id="a"><stop offset="20%" stop-color="white" stop-opacity="0.1"/><stop offset="100%" stop-color="white" stop-opacity="0"/></radialGradient></defs><circle cx="20" cy="20" r="15" fill="url(%23a)"/><circle cx="80" cy="70" r="10" fill="url(%23a)"/></svg>') repeat;
            animation: sparkle 4s infinite;
        }

        .recipe-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .recipe-content {
            position: relative;
            z-index: 2;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .recipe-title {
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .recipe-ingredients {
            font-size: 12px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .recipe-time {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            align-self: flex-end;
            margin-top: 10px;
        }

        /* Dietary Preferences */
        .preferences-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .preference-card {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #F1F5F9;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .preference-card.selected {
            border-color: var(--primary-green);
            background: linear-gradient(135deg, #F0FDF4, #DCFCE7);
            transform: translateY(-2px);
        }

        .preference-icon {
            font-size: 32px;
            margin-bottom: 10px;
            animation: iconBounce 2s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }

        .preference-title {
            font-weight: 700;
            font-size: 14px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }

        .preference-desc {
            font-size: 11px;
            color: var(--slate-gray);
        }

        /* Stats with Clean Design */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #F1F5F9;
        }

        .stat-number {
            font-size: 28px;
            font-weight: 900;
            color: var(--primary-green);
            margin-bottom: 8px;
            animation: countUp 1s ease-out;
        }

        @keyframes countUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stat-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--slate-gray);
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary-green);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 10px 30px rgba(46, 204, 113, 0.3);
            z-index: 1000;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Manual Input */
        .manual-input {
            background: var(--light-gray);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #E2E8F0;
        }

        .input-field {
            width: 100%;
            padding: 12px 16px;
            border-radius: 12px;
            border: 2px solid #E2E8F0;
            background: var(--neutral-white);
            color: var(--dark-gray);
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.1);
        }

        /* Sample Products */
        .sample-products {
            background: var(--light-gray);
            border-radius: 16px;
            padding: 20px;
        }

        .sample-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--dark-gray);
            margin-bottom: 15px;
            text-align: center;
        }

        /* SPLASH SCREEN STYLES */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-green) 0%, #27AE60 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            overflow: hidden;
        }

        .splash-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(255, 140, 66, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
            animation: backgroundShift 8s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(20px, -20px) scale(1.02); }
            66% { transform: translate(-20px, 20px) scale(0.98); }
        }

        .splash-content {
            text-align: center;
            color: white;
            padding: 40px 30px;
            position: relative;
            z-index: 2;
            max-width: 350px;
            width: 100%;
        }

        /* Animated Logo */
        .splash-logo {
            margin-bottom: 40px;
        }

        .logo-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            border: 3px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            animation: logoFloat 3s ease-in-out infinite, logoGlow 2s ease-in-out infinite;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes logoGlow {
            0%, 100% { box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 rgba(255, 255, 255, 0); }
            50% { box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15), 0 0 30px rgba(255, 255, 255, 0.2); }
        }

        .logo-icon-large {
            font-size: 48px;
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Welcome Text */
        .welcome-text {
            margin-bottom: 50px;
        }

        .welcome-title {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            animation: titleSlideIn 1s ease-out 0.5s backwards;
        }

        @keyframes titleSlideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-name {
            font-size: 24px;
            font-weight: 600;
            color: var(--secondary-orange);
            margin-bottom: 20px;
            animation: nameSlideIn 1s ease-out 0.7s backwards;
        }

        @keyframes nameSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-subtitle {
            font-size: 16px;
            line-height: 1.5;
            opacity: 0.9;
            font-weight: 400;
            animation: subtitleFadeIn 1s ease-out 0.9s backwards;
        }

        @keyframes subtitleFadeIn {
            from { opacity: 0; }
            to { opacity: 0.9; }
        }

        /* Onboarding Steps */
        .onboarding-steps {
            margin-bottom: 40px;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.5s ease;
        }

        .step-dot.active {
            background: var(--secondary-orange);
            box-shadow: 0 0 15px rgba(255, 140, 66, 0.5);
            transform: scale(1.2);
        }

        .step-dot.completed {
            background: white;
            transform: scale(1.1);
        }

        /* Splash Buttons */
        .splash-continue-btn {
            width: 100%;
            padding: 18px;
            border-radius: 25px;
            border: none;
            background: var(--secondary-orange);
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            box-shadow: 0 8px 25px rgba(255, 140, 66, 0.3);
            animation: buttonSlideIn 1s ease-out 1.1s backwards;
        }

        @keyframes buttonSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .splash-continue-btn:hover:not(:disabled) {
            background: #E67E22;
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(255, 140, 66, 0.4);
        }

        .splash-continue-btn:disabled {
            background: rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.7);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .splash-skip-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            animation: skipButtonFadeIn 1s ease-out 1.3s backwards;
        }

        @keyframes skipButtonFadeIn {
            from { opacity: 0; }
            to { opacity: 0.8; }
        }

        .splash-skip-btn:hover {
            color: white;
            transform: translateY(-1px);
        }

        /* Name Input Styles */
        .name-input-container {
            margin-bottom: 40px;
        }

        .name-input {
            width: 100%;
            padding: 18px 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            color: white;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            transition: all 0.3s ease;
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .name-input:focus {
            outline: none;
            border-color: var(--secondary-orange);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(255, 140, 66, 0.3);
            transform: scale(1.02);
        }

        /* Splash Preferences Grid */
        .splash-preferences-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 40px;
        }

        .splash-preference-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .splash-preference-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .splash-preference-card.selected {
            background: rgba(255, 140, 66, 0.3);
            border-color: var(--secondary-orange);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(255, 140, 66, 0.2);
        }

        .splash-pref-icon {
            font-size: 28px;
            margin-bottom: 8px;
            animation: prefIconFloat 3s ease-in-out infinite;
        }

        .splash-preference-card:nth-child(even) .splash-pref-icon {
            animation-delay: 1.5s;
        }

        @keyframes prefIconFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .splash-pref-title {
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        /* Splash Screen Transitions */
        .splash-screen.fade-out {
            animation: splashFadeOut 0.8s ease-in-out forwards;
        }

        @keyframes splashFadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(1.05); }
        }

        .splash-screen.slide-left {
            animation: splashSlideLeft 0.5s ease-in-out forwards;
        }

        @keyframes splashSlideLeft {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(-100%); opacity: 0; }
        }

        /* Responsive Splash Screens */
        @media (max-width: 375px) {
            .splash-content {
                padding: 30px 20px;
            }
            
            .welcome-title {
                font-size: 28px;
            }
            
            .welcome-name {
                font-size: 20px;
            }
            
            .logo-circle {
                width: 100px;
                height: 100px;
            }
            
            .logo-icon-large {
                font-size: 40px;
            }
            
            .splash-preferences-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }

        /* Hidden Views */
        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        /* Loading Animation */
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--slate-gray);
        }

        .loading::after {
            content: '...';
            animation: dots 2s infinite;
        }

        @keyframes dots {
            0%, 20% { opacity: 0; }
            40% { opacity: 1; }
            60% { opacity: 0; }
            80%, 100% { opacity: 1; }
        }
    </style>
</head>
<body>
        <!-- WELCOME SPLASH SCREEN -->
        <div id="welcome-splash" class="splash-screen">
            <div class="splash-content">
                <!-- Animated Logo -->
                <div class="splash-logo">
                    <div class="logo-circle">
                        <div class="logo-icon-large">üçΩÔ∏è</div>
                    </div>
                </div>
                
                <!-- Welcome Text -->
                <div class="welcome-text">
                    <h1 class="welcome-title">Welcome</h1>
                    <div class="welcome-name" id="welcome-user-name">to ScanChef</div>
                    <p class="welcome-subtitle">Your AI kitchen helper is ready to transform how you cook and eat</p>
                </div>
                
                <!-- Onboarding Steps -->
                <div class="onboarding-steps">
                    <div class="step-indicator">
                        <div class="step-dot active"></div>
                        <div class="step-dot"></div>
                        <div class="step-dot"></div>
                    </div>
                </div>
                
                <!-- Continue Button -->
                <button class="splash-continue-btn" onclick="startOnboarding()" id="get-started-btn">
                    Get Started
                </button>
                
                <!-- Skip Option -->
                <button class="splash-skip-btn" onclick="skipToApp()">
                    Skip Setup
                </button>
            </div>
        </div>

        <!-- NAME INPUT SCREEN -->
        <div id="name-input-screen" class="splash-screen" style="display: none;">
            <div class="splash-content">
                <div class="splash-logo">
                    <div class="logo-circle">
                        <div class="logo-icon-large">üëã</div>
                    </div>
                </div>
                
                <div class="welcome-text">
                    <h1 class="welcome-title">What's your name?</h1>
                    <p class="welcome-subtitle">We'd love to personalize your ScanChef experience</p>
                </div>
                
                <div class="name-input-container">
                    <input type="text" id="user-name-input" class="name-input" placeholder="Enter your first name" maxlength="20">
                </div>
                
                <div class="onboarding-steps">
                    <div class="step-indicator">
                        <div class="step-dot completed"></div>
                        <div class="step-dot active"></div>
                        <div class="step-dot"></div>
                    </div>
                </div>
                
                <button class="splash-continue-btn" onclick="saveName()" id="name-continue-btn" disabled>
                    Continue
                </button>
                
                <button class="splash-skip-btn" onclick="skipName()">
                    Maybe Later
                </button>
            </div>
        </div>

        <!-- DIETARY SETUP SCREEN -->
        <div id="dietary-setup-screen" class="splash-screen" style="display: none;">
            <div class="splash-content">
                <div class="splash-logo">
                    <div class="logo-circle">
                        <div class="logo-icon-large">üå±</div>
                    </div>
                </div>
                
                <div class="welcome-text">
                    <h1 class="welcome-title">Your Dietary Preferences</h1>
                    <p class="welcome-subtitle">Select any that apply to you for personalized recommendations</p>
                </div>
                
                <div class="splash-preferences-grid">
                    <div class="splash-preference-card" onclick="toggleSplashPreference(this, 'halal')">
                        <div class="splash-pref-icon">üïå</div>
                        <div class="splash-pref-title">Halal</div>
                    </div>
                    
                    <div class="splash-preference-card" onclick="toggleSplashPreference(this, 'vegan')">
                        <div class="splash-pref-icon">üå±</div>
                        <div class="splash-pref-title">Vegan</div>
                    </div>
                    
                    <div class="splash-preference-card" onclick="toggleSplashPreference(this, 'vegetarian')">
                        <div class="splash-pref-icon">ü•õ</div>
                        <div class="splash-pref-title">Vegetarian</div>
                    </div>
                    
                    <div class="splash-preference-card" onclick="toggleSplashPreference(this, 'kosher')">
                        <div class="splash-pref-icon">‚ú°Ô∏è</div>
                        <div class="splash-pref-title">Kosher</div>
                    </div>
                    
                    <div class="splash-preference-card" onclick="toggleSplashPreference(this, 'gluten-free')">
                        <div class="splash-pref-icon">üåæ</div>
                        <div class="splash-pref-title">Gluten-Free</div>
                    </div>
                    
                    <div class="splash-preference-card" onclick="toggleSplashPreference(this, 'nut-free')">
                        <div class="splash-pref-icon">ü•ú</div>
                        <div class="splash-pref-title">Nut-Free</div>
                    </div>
                </div>
                
                <div class="onboarding-steps">
                    <div class="step-indicator">
                        <div class="step-dot completed"></div>
                        <div class="step-dot completed"></div>
                        <div class="step-dot active"></div>
                    </div>
                </div>
                
                <button class="splash-continue-btn" onclick="completeOnboarding()">
                    Start Scanning!
                </button>
                
                <button class="splash-skip-btn" onclick="completeOnboarding()">
                    Skip for Now
                </button>
            </div>
        </div>

        <!-- Main App Container -->
        <!-- Status Bar -->
        <div class="status-bar">
            <span id="current-time">9:41</span>
            <span>‚óè‚óè‚óè‚óè‚óè 100%</span>
        </div>

        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="top-row">
                    <div class="logo">
                        <div class="logo-icon">üçΩÔ∏è</div>
                        <div class="logo-text">ScanChef</div>
                    </div>
                    <div class="points-container">
                        <span class="points" id="userPoints">0</span>
                        <span class="level-badge" id="userLevel">FRESH</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="tagline">üå± Healthy lifestyle meets AI kitchen helper</div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchView('scanner')">üì± Scan</button>
            <button class="nav-tab" onclick="switchView('pantry')">ü•¨ Pantry</button>
            <button class="nav-tab" onclick="switchView('recipes')">üë®‚Äçüç≥ Recipes</button>
            <button class="nav-tab" onclick="switchView('preferences')">‚öôÔ∏è Diet</button>
        </div>

        <!-- SCANNER VIEW -->
        <div id="scanner" class="view active">
            <div class="content">
                <div class="scanner-view">
                    <!-- Hero Text -->
                    <div class="hero-text">
                        <div class="hero-title">Your Pantry ‚Üí Dinner Tonight</div>
                        <div class="hero-subtitle">Scan any product to discover if it matches your dietary needs</div>
                    </div>

                    <!-- Magical Camera Container -->
                    <div id="camera-container">
                        <video id="camera-video" autoplay playsinline style="display: none;"></video>
                        <div class="camera-placeholder" id="camera-placeholder">üì∑</div>
                        <div class="scan-overlay">
                            <div class="scan-line"></div>
                        </div>
                    </div>
                    
                    <!-- Camera Controls -->
                    <div style="display: flex; gap: 12px; margin-bottom: 25px;">
                        <button class="action-button btn-primary" id="start-camera" onclick="startCamera()">
                            üì∑ Start Magical Scanner
                        </button>
                        <button class="action-button btn-secondary" id="stop-camera" onclick="stopCamera()" style="display: none;">
                            ‚èπÔ∏è Stop
                        </button>
                    </div>

                    <!-- Manual Input -->
                    <div class="manual-input">
                        <h4 style="margin-bottom: 12px; font-size: 14px; font-weight: 700; color: var(--dark-gray);">
                            Manual Entry
                        </h4>
                        <input type="text" id="manual-barcode" placeholder="Enter barcode (e.g. 123456789012)" class="input-field">
                        <button class="action-button btn-orange" onclick="searchProduct()">
                            üîç Search Product
                        </button>
                    </div>

                    <!-- Sample Products for Testing -->
                    <div class="sample-products">
                        <div class="sample-title">üéØ Try These Sample Products</div>
                        <button class="action-button btn-secondary" onclick="testProduct('012000001277')" style="font-size: 12px; padding: 10px;">
                            ü•§ Coca-Cola Classic
                        </button>
                        <button class="action-button btn-secondary" onclick="testProduct('028400064057')" style="font-size: 12px; padding: 10px;">
                            üç™ Oreo Cookies
                        </button>
                        <button class="action-button btn-secondary" onclick="testProduct('073298098228')" style="font-size: 12px; padding: 10px;">
                            üç´ Chocolate Bar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PANTRY VIEW with Floating Bubbles -->
        <div id="pantry" class